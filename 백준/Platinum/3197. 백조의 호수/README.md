# [Platinum V] 백조의 호수 - 3197 

[문제 링크](https://www.acmicpc.net/problem/3197) 

### 성능 요약

메모리: 302212 KB, 시간: 3432 ms

### 분류

너비 우선 탐색, 자료 구조, 분리 집합, 그래프 이론, 그래프 탐색

### 제출 일자

2024년 2월 1일 15:42:30

### 문제 설명

<p>두 마리의 백조가 호수에서 살고 있었다. 그렇지만 두 마리는 호수를 덮고 있는 빙판으로 만나지 못한다.</p>

<p>호수는 행이 R개, 열이 C개인 직사각형 모양이다. 어떤 칸은 얼음으로 덮여있다.</p>

<p>호수는 차례로 녹는데, 매일 물 공간과 접촉한 모든 빙판 공간은 녹는다. 두 개의 공간이 접촉하려면 가로나 세로로 닿아 있는 것만 (대각선은 고려하지 않는다) 생각한다.</p>

<p>아래에는 세 가지 예가 있다.</p>

<pre>...XXXXXX..XX.XXX ....XXXX.......XX .....XX.......... 
....XXXXXXXXX.XXX .....XXXX..X..... ......X.......... 
...XXXXXXXXXXXX.. ....XXX..XXXX.... .....X.....X..... 
..XXXXX..XXXXXX.. ...XXX....XXXX... ....X......XX.... 
.XXXXXX..XXXXXX.. ..XXXX....XXXX... ...XX......XX.... 
XXXXXXX...XXXX... ..XXXX.....XX.... ....X............ 
..XXXXX...XXX.... ....XX.....X..... ................. 
....XXXXX.XXX.... .....XX....X..... ................. 
      처음               첫째 날             둘째 날
</pre>

<p>백조는 오직 물 공간에서 세로나 가로로만(대각선은 제외한다) 움직일 수 있다.</p>

<p>며칠이 지나야 백조들이 만날 수 있는 지 계산하는 프로그램을 작성하시오.</p>

### 입력 

 <p>입력의 첫째 줄에는 R과 C가 주어진다. 단, 1 ≤ R, C ≤ 1500.</p>

<p>다음 R개의 줄에는 각각 길이 C의 문자열이 하나씩 주어진다. '.'은 물 공간, 'X'는 빙판 공간, 'L'은 백조가 있는 공간으로 나타낸다.</p>

### 출력 

 <p>첫째 줄에 문제에서 주어진 걸리는 날을 출력한다.</p>

# 풀이
### 시간 초과
처음 문제를 보았을 때는 단순한 시뮬레이션이라고 생각했다. 예전에 풀었던 치즈 문제 같았기 때문. 
1. 물에서 bfs 시작 -> 물과 인접한 빙판 칸 표시
2. 표시된 칸을 녹이기
3. 백조 bfs -> 만나는지 확인
하지만 시간초과가 발생해서 로직을 수정해야만 했다. 최악의 경우 1500 * 1500 * 1499(모든 빙판이 녹는 경우)이다.

수정 로직은 인터넷에 검색해서 힌트를 참고했다. 나중엔 혼자 풀어봐야 할듯.

핵심은 **이전에 막혔던 부분을 다른 큐에 저장**해서 다음 반복 떄 거기서부터 시작해야 한다.

### 수정
while 문을 반복하면서 백조 bfs, 물 bfs를 1번씩 수행한다. 백조 bfs에서 백조가 서로 만났다면 그대로 반복문 종료.

**백조 bfs 로직**

큐 2개를 사용한다. 현재 백조 큐, 다음 백조 큐가 존재한다.

백조가 만나지 못하는 이유는 빙판 때문이다. 한 번 bfs를 진행했을 때 백조의 동선이 빙판때문에 가로막혔다면 다음 반복 때는 해당 빙판은 녹는다.

(백조가 이동하는 동선 == 물, 동선을 방해하는 빙판은 물과 인접하기 때문)

따라서 인접한 빙판을 따로 저장해놓고 다음 bfs때 사용하면 된다.

1. 인접한 칸이 물이라면 현재 백조 큐에 추가.
2. 인접한 칸이 빙판이라면 다음 백조 큐에 추가.
3. 인접한 칸이 백조라면 flag를 변경하고 종료.

이후 다음 반복 때는 다음 백조 큐를 현재 백조 큐에 복사하고 bfs를 진행한다.
**물 bfs 로직**

처음 입력을 받을 때 빙판이 아닌 영역을 전부 큐에다 집어넣는다.  

bfs를 진행하면서 물과 인접한 곳이라면 물로 변경하고, 해당 좌표를 다음 큐에 집어넣는다.     

다음 반복 때는 다음 큐를 현재 큐로 만들고 다시 bfs를 진행한다.  

물을 탐색하는 경우에는 방문 처리가 필요하지 않다.   
그저 물과 인접한 곳이면 큐에 저장하고 그래프는 물로 변경하면 된다.  

메인 로직

1. 백조 bfs로 백조 만났는지 확인.
2. 만나지 않았다면 물 bfs로 녹임.
3. 현재 백조 큐를 다음 백조 큐로 만들기
4. 현재 녹은 빙판 큐를 다음 물 큐로 만들기
5. 다음 큐 초기화

